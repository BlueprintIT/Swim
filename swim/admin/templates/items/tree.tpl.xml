<?xml version="1.0"?>

<tree>
{if isset($request.query.root)}
  {apiget var="root" type="item" id=$request.query.root}
  {include file="items/treeitem.tpl" item=$root}
{elseif isset($request.query.section)}
  {apiget var="section" type="section" id=$request.query.section}
  {assign var="root" value=$section->getRootItem()}
  {include file="items/treeitem.tpl" item=$root}
  {include file="items/uncattree.tpl"}
{else}
  {apiget var="sections" type="section"}
  {foreach from=$sections item="section"}
  <item class="section" name="{$section->getName()|escape}">
    {assign var="root" value=$section->getRootItem()}
    {include file="items/treeitem.tpl" item=$root}
    {include file="items/uncattree.tpl"}
  </item>
  {/foreach}
{/if}
</tree>
